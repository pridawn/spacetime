<!DOCTYPE html>
<meta charset="utf-8">
<head>
<style>
g.head > rect {
  fill: #98FB98; //#ADD8E6;
}


text {
  font-weight: 300;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 14px;
  text-align: center;
}

.node rect {
  stroke:#000000;//#333;// #999;
  fill: #fff;
  stroke-width: 2.5px;
}

//.edgePath path {
  //stroke:#000000; //#333;
  //stroke-width: 2px;
//}
.edgePath path.path {
  stroke: #333;
  fill: none;
  stroke-width: 1.5px;
}

.node text {
  pointer-events: none;
}

/* This styles the title of the tooltip */
.tipsy .name {
  font-size: 1.5em;
  font-weight: bold;
  color: #000000;
  margin: 0;
}

/* This styles the body of the tooltip */
.tipsy .description {
  font-size: 1.2em;
}

.tipsy { font-size: 10px; position: absolute; padding: 5px; z-index: 100000; }
.tipsy-inner { background-color: #D3D3D3; color: #FFF; max-width: 400px; padding: 5px 8px 4px 8px; text-align: center; }

i {
  border: solid black;
  border-width: 0 3px 3px 0;
  display: inline-block;
  padding: 3px;
}

.right {
  transform: rotate(-45deg);
  -webkit-transform: rotate(-45deg);
}

.left {
  transform: rotate(135deg);
  -webkit-transform: rotate(135deg);
}

.up {
  transform: rotate(-135deg);
  -webkit-transform: rotate(-135deg);
}

.down {
  transform: rotate(45deg);
  -webkit-transform: rotate(45deg);
}

table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
  padding: 5px;
}
 </style>

    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="https://dagrejs.github.io/project/dagre-d3/latest/dagre-d3.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.2.min.js"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='jquery.tipsy.js') }}"></script>
    <link href= "{{ url_for('static', filename = 'tipsy.css') }}" rel="stylesheet" type="text/css" />
    <link href= "{{ url_for('static', filename = 'bootstrap.min.css') }}" rel="stylesheet" type="text/css" />
</head>

<body>

<div class="container">
<h2 class="jumbotron" style="text-align: center">Spacetime Debugger</h2>

<div class="row">
<div class="col-lg-6">
    <h3 style="text-align: center">Graph[Grouper]</h3>
    <svg id="svg-canvas" width=960 height=400 ></svg>
<script>
    // Create the input graph
var g = new dagreD3.graphlib.Graph()
  .setGraph({})
  .setDefaultEdgeLabel(function() { return {}; });



g.setNode(0,{label:"ROOT", class:"not_head" , style: "stroke:#006400"});
g.setNode(1,{label:"154b", class:"not_head" , style: "stroke:#006400"});
g.setNode(2,{label:"a553", class:"not_head" , style: "stroke:#8B0000"});
g.setNode(3,{label:"82c0", class:"not_head" , style: "stroke:#006400"});
g.setNode(4,{label:"x97d", class:"not_head", style: "stroke:#006400"});
g.setNode(5,{label:"306a", class:"not_head", style: "stroke:#8B0000"});
g.setNode(6,{label:"bfa4", class:"head", style: "stroke:#006400"});
g.setNode(7,{label:"WordCounter1", class:"app", style: "stroke:#696969; stroke-dasharray: 5, 5;"});
g.setNode(8,{label:"WordCounter2", class:"app", style: "stroke:#696969; stroke-dasharray: 5, 5;"});
g.setNode(9,{label:"Grouper", class:"app", style: "stroke:#696969; stroke-dasharray: 5, 5;"});


g.setEdge(0,1,{style:'stroke:#000000;stroke-width: 2px;',arrowheadStyle: ''});
g.setEdge(1,2,{style:'stroke:#000000;stroke-width: 2px;',arrowheadStyle: ''});
g.setEdge(1,3,{style:'stroke:#000000;stroke-width: 2px;',arrowheadStyle: ''});
g.setEdge(3,5,{style:'stroke:#000000;stroke-width: 2px;',arrowheadStyle: ''});
g.setEdge(3,4,{style:'stroke:#000000;stroke-width: 2px;',arrowheadStyle: ''});
g.setEdge(2,4,{style:'stroke:#000000;stroke-width: 2px;',arrowheadStyle: ''});
g.setEdge(5,6,{style:'stroke:#000000;stroke-width: 2px;',arrowheadStyle: ''});
g.setEdge(4,6,{style:'stroke:#000000;stroke-width: 2px;',arrowheadStyle: ''});
g.setEdge(7,2,{style:"stroke: #696969; stroke-width: 3px; stroke-dasharray: 5, 5;",arrowheadStyle: 'fill: #696969'});
g.setEdge(8,5,{style:"stroke: #696969; stroke-width: 3px; stroke-dasharray: 5, 5;",arrowheadStyle: 'fill: #696969'});
g.setEdge(9,4,{style:"stroke: #696969; stroke-width: 3px; stroke-dasharray: 5, 5;",arrowheadStyle: 'fill: #696969'});




console.log(g);

g.nodes().forEach(function(v) {
  var node = g.node(v);
  // Round the corners of the nodes
  node.rx = node.ry = 5;
});





// Create the renderer
var render = new dagreD3.render();


// Set up an SVG group so that we can translate the final graph.
var svg = d3.select("svg"),
    svgGroup = svg.append("g");

// Run the renderer. This is what draws the final graph.
render(d3.select("svg g"), g);

svgGroup.selectAll("g.edgePath")
  .attr("title", function(v) { return styleTooltip(g.edge(v).payload) })
  .each(function(v) { $(this).tipsy({ gravity: "n", opacity: 1, html: true }); });

// Center the graph
var xCenterOffset = (svg.attr("width") - g.graph().width) / 5;
svgGroup.attr("transform", "translate(" + xCenterOffset + ", 20)");
svg.attr("height", g.graph().height + 40);


</script>

<div class="row">

    <form action="/next" method="get">
        <button name="Next Step" type="submit" class="text">Step Node</button>
    </form>&nbsp;

    <form action="/displayQueue" method="get">
        <button name="RefreshQueue" type="submit">Step All Nodes</button>
    </form>
      &nbsp;
      <form action="/next" method="get">
        <button name="Next Step" type="submit" class="text">Play</button>
    </form>
    &nbsp;
    &nbsp;
    &nbsp;



</div>


</div>
<div class="col-lg-6">


<h3>Actions</h3>
    <p id="req_list">Previous Steps</p>
<div style="height:80px;width:520px;border:1px solid #ccc;, Serif;overflow:auto;">

    <ul style="list-style: none;">
        <li>        &nbsp;                                                      </li>
        <li>         &nbsp;                                                     </li>
        <li>          &nbsp;                                                     </li>
        <li>&#x2b;Receive Push Request 154b to a553 [from WordCounter1] &#x21e8</li>
        <li>&#x2b;Checkout [from Grouper] State: 154b &#x21e8</li></ul>
    <li>&#x2b;Receive Push Request 82c0 to 306a [from WordCounter2]  &#x21e8 </li>


</div>

<p id="req_list">Next Steps</p>
<div style="height:350px;width:520px;border:1px solid #ccc;, Serif;overflow:auto;">

<ul style="list-style: none;"><li>&#x2212;Checkout [from Grouper] State: x97d &#x21e7; &#x21e9;</li>
    <ul>

        <li><span style="background-color: #D6EAF8">Create delta from state: x97d</span>&#x21e7; &#x21e9;</li>
        <li>Send delta &#x21e7; &#x21e9;</li>
        <li>Garbage Collect</span>&#x21e7; &#x21e9;</li>

    </ul>
</ul>
<ul style="list-style: none;"><li>&#x2b;Receive Pull Request [from WordCounter2] State: 306a &#x21e7; &#x21e9;</li></ul>
<ul style="list-style: none;"><li>&#x2b;Receive Pull Request [from WordCounter1] State: a553 &#x21e7; &#x21e9;</li></ul>

</div>


 </div>
</div>
 <h3>State at version bfa4</h3>
<div class="row">



   <table style="width:20%">
   <caption style="caption-side:top">&#x2212;WordCount</caption>

  <tr>
    <th>word</th>
    <th>count</th>

  </tr>

   <tr>
    <td>foo</td>
    <td>1</td>

  </tr>

  <tr>
    <td>bar</td>
    <td>6</td>

  </tr>
  <tr>
    <td>baz</td>
    <td>1</td>
  </tr>
  <tr>
</table>

    &nbsp;
    &nbsp;
    &nbsp;

     <table style="width:20%">
   <caption>&#x2b;Line</caption>
</table>


     <table style="width:20%">
   <caption>&#x2b;Stop</caption>
</table>



    &nbsp;
    &nbsp;
</div>
</div>
</div>
&nbsp;
&nbsp;
</body>
</html>